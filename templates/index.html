<!-- templates/index.html -->
<!DOCTYPE html>
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>대본작가 순이</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="../static/assets/suni.ico" rel="shortcut icon" type="image/x-icon">
    <link rel="stylesheet" href="../static/css/bootstrap.css">
    <style>
        @import url(//fonts.googleapis.com/earlyaccess/jejugothic.css);

        *{
            font-family: 'Jeju Gothic', sans-serif;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-custom">
        <div id="header">
            <a class="navbar-brand" href="#"><img src="../static/assets/suni.png" style="margin: 0px 20px" width="75" height="60">대본작가 AI순이</a>
        </div>
    </nav> <!--상단 네비게이션바-->

    <div class="rectangle" style="width: 550px; height: 250px; display: inline-block; float: left;">
        <div class="form-group" style="display: inline-block; margin-right: 30px;">
            <label for="Category" class="form-label mt-2"><b>카테고리</b></label>
            <select class="form-select" id="Category">
            <option>선택하세요</option>  
            <option value="I">IT</option>
            <option value="L">생활</option>
            <option value="C">소통</option>
            <option value="A">예술</option>
            <option vlaue="FL">외국어</option>
            <option value="Sp">운동</option>
            <option value="M">음악</option>
            <option value="Hu">인문</option>
            <option value="Q">퀴즈</option>
            <option value="H">힐링</option>
            <option value="etc">기타</option>
            </select>
        </div>

        <div class="form-group" style="display: inline-block;">
            <label for="Subject" class="form-label mt-2"><b>주제</b></label>
            <select class="form-select" id="Subject">
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>   <!--js에서 hidden 구현 + 기타선택시 hidden directbox구현-->
            </select>
        </div>

        <form id="chat-form">
            <label for="input" class="form-label mt-4"><b>추가지시</b></label><br>
            <textarea class="form-control" id="input" rows="4" cols="45" style="float: left; font-size: 0.9rem;"></textarea>
            <input type="submit" class="btn btn-custom" style="margin-left: 20px; margin-bottom: -110px;" value="대본 만들기">
        </form> <!--추가지시사항+생성버튼-->
    </div>

<!--여기서부터 hidden box js처리-->
    <div class="rectangle" style="width: 480px; height: 250px; float:left;">
        <div class="form-group" style="display: inline-block;">
            <label for="rate" class="form-label mt-2"><b>별점</b></label><br>
            <fieldset class="rate">
                <input type="radio" id="rating5" name="rating" value="5"><label for="rating5" title="5점"></label>
                <input type="radio" id="rating4" name="rating" value="4"><label for="rating4" title="4점"></label>
                <input type="radio" id="rating3" name="rating" value="3"><label for="rating3" title="3점"></label>
                <input type="radio" id="rating2" name="rating" value="2"><label for="rating2" title="2점"></label>
                <input type="radio" id="rating1" name="rating" value="1"><label for="rating1" title="1점"></label>
            </fieldset>
        </div>

        <form id="rating-reason">
            <div class="form-group" style="display: inline-block;">
                <label for="input_1" id="input_1" class="form-label mt-2"><b>사유</b></label><br>
                <textarea class="form-control" id="input_1" rows="4" cols="35" style="font-size: 0.9rem;"></textarea>
            </div>
            <input type="submit" class="btn btn-custom" style="margin-left: 20px;" value="대본 재생성">
        </form>
    </div>
<!--여기까지 hidden box js처리-->

    <div class="table_rec" style="width: 90%; height: 1000px; background-color: lightgray; clear: left;">
        <!--js에서 누적 데이터에 따른 탭추가 구현필요-->


        

        <!--gpt api로 질문하고 답받아오기-->
        <p id="response"></p>
        <script>
            $("#chat-form").submit(function(e) {
                e.preventDefault();

                $.ajax({
                    url: '/generate',
                    type: 'post',
                    contentType: 'application/json',
                    data: JSON.stringify({
                        'prompt': $('#input').val()
                    }),
                    success: function(data) {
                        $('#response').text(data.response);
                    },
                    error: function() {
                        alert('Error!');
                    }
                });
            });
        </script>
    </div>
    <script type="text/javascript" src="../static/js/bootstrap.js"></script>
</body>
</html>